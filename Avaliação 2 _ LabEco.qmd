---
title: "Taxa de Câmbio e Reservas Internacionais no Brasil: Análise de Tendências Mensais (2010-2025)"
author: "Bruna Laís Knopf"
format: html
editor: visual
---

```{r}
#| echo: false

#| label: load-packages
#| include: false

options(repos = "https://cran.r-project.org")

required_packages <- c("rbcb", "ggplot2", "dplyr", "scales", "lubridate", "ggthemes", "GetBCBData", "tidyr")
new_packages <- required_packages[!(required_packages %in% installed.packages()[,"Package"])]
if (length(new_packages) > 0) {
  install.packages(new_packages, dependencies = TRUE)
}
```

## Relação entre Taxa de Câmbio e Reservas Internacionais do Brasil (2010-2025)

### Dados Mensais do Banco Central do Brasil

O gráfico “Taxa de Câmbio e Reservas Internacionais no Brasil (Mensal)” apresenta a evolução da taxa de câmbio (R\$/US\$) e das reservas internacionais (US\$ bilhões) no Brasil, de janeiro de 2010 a maio de 2025, utilizando dados do Sistema Gerenciador de Séries Temporais (SGS) do Banco Central do Brasil.

A **Taxa de Câmbio** (SGS 1) representa o preço do dólar americano em reais (R\$/US\$), calculada como média mensal. As **Reservas Internacionais** (SGS 13982 ou 3546, em caso de falha) medem o estoque de ativos externos do Brasil, expresso em bilhões de dólares americanos (US\$ bi), também em médias mensais.

Esses dados ilustram a interação entre a política cambial e a gestão de reservas, destacando períodos de volatilidade econômica e intervenções do Banco Central. A análise temporal revela como crises econômicas e eventos globais impactaram a estabilidade do real e o uso das reservas.

```{r}
#| echo: false
#| message: false
#| warning: false

#| label: graf1
#| warning: false
#| message: false
#| echo: false
#| include: false
#| fig-cap: "Taxa de Câmbio e Reservas Internacionais no Brasil (Mensal), 2010-2025"
#| fig-width: 10
#| fig-height: 6

# TIRAR NOTAÇÃO CIENTÍFICA
options(scipen = 999)

# DEFINIR MIRROR DO CRAN
options(repos = "https://cran.r-project.org")

# VERIFICAR E INSTALAR PACOTES NECESSÁRIOS
required_packages <- c("rbcb", "ggplot2", "dplyr", "scales", "lubridate", "ggthemes", "GetBCBData", "tidyr")
new_packages <- required_packages[!(required_packages %in% installed.packages()[,"Package"])]
if (length(new_packages) > 0) {
  install.packages(new_packages, dependencies = TRUE)
}

# CARREGAR BIBLIOTECAS
library(scales)
library(ggplot2)
library(dplyr)
library(lubridate)
library(rbcb)
library(ggthemes)
library(GetBCBData)
library(tidyr)

# DEFINIR PERÍODO DE ANÁLISE
start_date <- "2010-01-01"
end_date <- "2025-05-16"

# COLETAR DADOS DO SGS
my_ids <- c(cambio = 1, reservas = 13982)
dados <- tryCatch(
  {
    gbcbd_get_series(
      id = my_ids,
      first.date = start_date,
      last.date = end_date,
      format.data = "long",
      use.memoise = TRUE,
      cache.path = tempdir(),
      do.parallel = FALSE
    )
  },
  error = function(e) {
    message("Erro ao coletar dados com SGS 13982. Usando SGS 3546 (Reservas Internacionais, Mensal)...")
    my_ids_alt <- c(cambio = 1, reservas = 3546)
    gbcbd_get_series(
      id = my_ids_alt,
      first.date = start_date,
      last.date = end_date,
      format.data = "long",
      use.memoise = TRUE,
      cache.path = tempdir(),
      do.parallel = FALSE
    )
  }
)

# PIVOTAR DADOS PARA FORMATO WIDE
dados <- dados %>%
  mutate(month = floor_date(ref.date, "month")) %>%
  group_by(month, series.name) %>%
  summarise(value = mean(value, na.rm = TRUE), .groups = "drop") %>%
  pivot_wider(names_from = series.name, values_from = value) %>%
  rename(
    ref.date = month,
    cambio = "cambio",
    reservas = "reservas"
  )

# VERIFICAR COLUNAS
if (!all(c("cambio", "reservas") %in% colnames(dados))) {
  stop("Erro: As colunas 'cambio' e/ou 'reservas' não foram encontradas no dataframe.")
}

# CONVERTER RESERVAS PARA BILHÕES DE US$
dados <- dados %>% mutate(reservas = reservas / 1000)

# CRIAR GRÁFICO NO ESTILO THE ECONOMIST
p <- ggplot(dados, aes(x = ref.date)) +
  geom_line(aes(y = cambio, color = "Taxa de Câmbio (R$/US$)"), size = 1.2) +
  geom_line(aes(y = reservas / 100, color = "Reservas Internacionais (US$ bi)"), size = 1.2) +
  scale_y_continuous(
    name = "Taxa de Câmbio (R$/US$)",
    labels = number_format(accuracy = 0.01),
    sec.axis = sec_axis(~ . * 100, name = "Reservas Internacionais (US$ bi)",
                        labels = number_format(accuracy = 1))
  ) +
  scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
  scale_color_manual(
    values = c("Taxa de Câmbio (R$/US$)" = "#A12830", "Reservas Internacionais (US$ bi)" = "#005B82"),
    name = ""
  ) +
  labs(
    title = "Taxa de Câmbio e Reservas Internacionais no Brasil (Mensal)",
    subtitle = paste0(format(min(dados$ref.date), "%Y"), " a ", format(max(dados$ref.date), "%b %Y")),
    x = "",
    caption = "Fonte: Banco Central do Brasil (SGS). Elaboração própria."
  ) +
  theme_economist(base_size = 12) +
  theme(
    plot.title = element_text(face = "bold", hjust = 0.5, size = 14, margin = margin(t = 10, b = 10)),
    plot.subtitle = element_text(hjust = 0.5, size = 10),
    plot.caption = element_text(hjust = 0, size = 8),
    axis.title.y = element_text(size = 10, vjust = 1),
    axis.title.y.right = element_text(size = 10, vjust = 1),
    legend.position = "bottom",
    legend.text = element_text(size = 9),
    axis.text.x = element_text(angle = 45, hjust = 1)
  )

# EXIBIR GRÁFICO
print(p)
```

## Análise

O gráfico utiliza uma escala dupla para exibir as duas variáveis simultaneamente: a taxa de câmbio no eixo Y primário (em R\$/US\$) e as reservas internacionais no eixo Y secundário (em bilhões de US\$). A visualização segue o estilo da revista *The Economist*, com linhas distintas para cada variável, codificadas por cores (#A12830 para taxa de câmbio e #005B82 para reservas internacionais).

A análise visual sugere que períodos de aumento na taxa de câmbio (depreciação do real) frequentemente coincidem com movimentos nas reservas internacionais, que podem ser utilizados pelo Banco Central para estabilizar o mercado cambial. Por exemplo, picos na taxa de câmbio em momentos de instabilidade econômica global ou doméstica podem ser acompanhados por reduções graduais nas reservas.

Embora o gráfico não apresente uma regressão formal, a relação entre as variáveis pode ser explorada em estudos futuros. Um modelo de regressão poderia, por exemplo, quantificar o impacto das intervenções do Banco Central (via reservas) na taxa de câmbio, com variáveis de controle como inflação ou taxa de juros.

## Conclusão

A análise confirma a importância das reservas internacionais como instrumento de política monetária para mitigar volatilidades na taxa de câmbio. Países com reservas robustas, como o Brasil, tendem a ter maior capacidade de resposta a choques externos, o que é particularmente relevante em períodos de crise econômica global. A tendência observada no gráfico reforça a necessidade de monitoramento contínuo dessas variáveis para a formulação de políticas econômicas eficazes.

## Referência Complementar

Eichengreen, B.; Mathieson, D. J. The Currency Composition of Foreign Exchange Reserves: Retrospect and Prospect. *IMF Working Paper*, WP/00/131, 2000. DOI: 10.5089/9781451855272.001.

Este artigo analisa a composição e o papel das reservas internacionais na estabilidade macroeconômica, com foco em países emergentes como o Brasil. Por meio de dados históricos e modelagem quantitativa, os autores destacam como as reservas influenciam a taxa de câmbio e a confiança dos investidores, corroborando a relevância da gestão de reservas observada na análise apresentada.
